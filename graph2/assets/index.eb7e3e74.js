var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s;import{p as l,a as i,o as u,c as r,r as d,b as c,d as o,e as v,f as p,n as h,g as m,h as f,w as y,i as x,v as g,u as w,F as b,j as V,t as $,T as k,k as j,l as M,m as F,q as _,s as S,x as C,y as E,z as O,A,B as L,C as B}from"./vendor.2dc1e110.js";l("data-v-5389a9ea"),i();const D={expose:[],setup:e=>(e,a)=>{const t=d("router-view");return u(),r(t)}};const P=F();l("data-v-24def9d6");const I={class:"graph-wrapper"},T={class:"container"},z=f("span",{class:"input-label"}," Введите вашу сумму ",-1),U={class:"value-input"},R=f("button",{type:"submit"},"Рассчитать",-1),Y=_('<div class="axis-x" data-v-24def9d6><div class="x-item" data-v-24def9d6>Янв</div><div class="x-item" data-v-24def9d6>Фев</div><div class="x-item" data-v-24def9d6>Март</div><div class="x-item" data-v-24def9d6>Апр</div><div class="x-item" data-v-24def9d6>Май</div><div class="x-item" data-v-24def9d6>Июн</div><div class="x-item" data-v-24def9d6>Июл</div><div class="x-item" data-v-24def9d6>Авг</div><div class="x-item" data-v-24def9d6>Сен</div><div class="x-item" data-v-24def9d6>Окт</div><div class="x-item" data-v-24def9d6>Ноя</div><div class="x-item" data-v-24def9d6>Дек</div></div>',1),q={class:"footer"},N={key:0,class:"container"},G=f("h3",null,"Итоговая сумма:",-1),H={class:"current-price"};i();const J={expose:[],props:{points:Array,duration:Number,id:String,currency:String},setup(e){const l=e,{points:i,duration:d}=l;c(400),c(400),c(0),c(0);const F=c(null),_=c(null),S=o((()=>+_.value*(i[i.length-1][1]/i[0][1]))),C=o((()=>(+S.value.toFixed(2)).toLocaleString())),E=o((()=>_.value&&S.value?{value:S.value-+_.value,perc:100*(+S.value-+_.value)/+S.value}:{value:0,perc:0})),O=c(0),A=v({width:1e3,height:400,x:-30,y:0});o((()=>d/i.length));let L=v({isMount:!1,saved:null,selled:null,values:o((()=>[...i].map((e=>e[1])))),maxValue:o((()=>[...i].reduce(((e,a)=>null===e||+a[1]>e?+a[1]:e),null))),minValue:o((()=>[...i].reduce(((e,a)=>null===e||e>a[1]?a[1]:e),null))),steps:o((()=>[...i].length))}),B=o((()=>[{x:0,value:L.minValue,y:L.minValue&&L.maxValue?ae(0,L.minValue).y:0},{x:0,value:L.maxValue,y:L.minValue&&L.maxValue?ae(0,L.maxValue).y:0},{x:0,value:L.minValue&&L.maxValue?L.minValue+(L.maxValue-L.minValue)/2:0,y:L.minValue&&L.maxValue?ae(0,L.minValue+(L.maxValue-L.minValue)/2).y:0}]));const D=o((()=>i.reduce(((e,a)=>(e.push(ae(a[0],a[1])),e)),[]))),J=o((()=>D.value.reduce(((e,a,t,s)=>{if(t){const n=s[t-1],l=a;e.push(`M${n.x} ${n.y}, ${l.x} ${l.y}`)}return e}),[]))),K=o((()=>D.value.reduce(((e,a,t,s)=>{if(t&&t<=O.value){const n=s[t-1],l=a;e+=`${n.x} ${n.y}, ${l.x} ${l.y} `}return e}),"")));o((()=>[...J.value].filter(((e,a)=>a<O.value)))),o((()=>[...i].filter(((e,a)=>e===L.saved||e===L.selled)).map((e=>((e,l)=>{for(var i in l||(l={}))t.call(l,i)&&n(e,i,l[i]);if(a)for(var i of a(l))s.call(l,i)&&n(e,i,l[i]);return e})({value:e[1]},ae(e[0],e[1])))))),o((()=>i[O.value]));const Q=c(!1);function W(e){e+1<L.steps?O.value=e+1:(Q.value=!1,null==L.selled&&(L.selled=i[L.steps-1]))}const X=c(null);function Z(){Q.value=!0,ee()}function ee(){W(O.value),Q.value&&h((()=>{ee()}))}function ae(e,a){const t=(A.width-35-0)/L.steps,s=(A.height-80-20)/(L.maxValue-L.minValue);return{x:0+e*t,y:A.height-40-a*s+L.minValue*s}}function te(){const{width:e,height:a}=X.value.getBoundingClientRect();A.width=Math.round(e),A.height=Math.round(a)}function se(){_.value=F.value,document.activeElement.blur()}return p((()=>{const{width:e,height:a}=X.value.getBoundingClientRect();O.value=0,A.width=Math.round(e),A.height=Math.round(a),window.addEventListener("resize",te),h((()=>{Z()}))})),m((()=>{window.removeEventListener("resize",te)})),(e,a)=>(u(),r(b,null,[f("div",I,[f("div",T,[z,f("form",{onSubmit:y(se,["prevent"]),class:"input-form"},[f("label",U,[x(f("input",{class:"input-text",type:"text","onUpdate:modelValue":a[1]||(a[1]=e=>F.value=e)},null,512),[[g,F.value]])]),R],40,["onSubmit"])]),f("div",{ref:X,class:"graph-container"},[Y,(u(),r("svg",{class:"graph",width:w(A).width+10,height:w(A).height,viewBox:`${w(A).x} ${w(A).y} ${w(A).width+10} ${w(A).height}`,fill:"none",xmlns:"http://www.w3.org/2000/svg"},[f("path",{class:"axis",d:`M0 ${w(A).height}, ${w(A).width} ${w(A).height}`},null,8,["d"]),(u(!0),r(b,null,V(w(B),(e=>(u(),r(b,{key:e.value},[f("path",{class:"y-line",d:`M0 ${e.y}, ${w(A).width} ${e.y}`},null,8,["d"]),f("text",{x:"-25",y:e.y+4,class:"y-text"},$(Math.round(e.value)),9,["y"])],64)))),128)),f("path",{class:"axis",d:`M0 ${w(A).height}, 0 0`},null,8,["d"]),f("polyline",{class:"line-path","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",points:w(K)},null,8,["points"])],8,["width","height","viewBox"]))],512)]),f("div",q,[f(k,{name:"fade",appear:""},{default:P((()=>[_.value?(u(),r("div",N,[G,f("div",H,$(w(C))+" "+$(l.currency?" "+l.currency:" ₽"),1),w(E)&&w(E).value?(u(),r("div",{key:0,class:["current-diff",{up:w(E).value>0,down:w(E).value<0}]},[0!==w(E).value?(u(),r("div",{key:0,class:["arrow",{up:w(E).value>0,down:w(E).value<0}]},null,2)):j("",!0),M(" "+$((+Math.abs(w(E).value).toFixed(2)).toLocaleString())+" "+$(l.currency?" "+l.currency:" ₽")+" ("+$(+Math.abs(w(E).perc).toFixed(2))+"%) ",1)],2)):j("",!0)])):j("",!0)])),_:1})])],64))},__scopeId:"data-v-24def9d6"};const K=F();l("data-v-3afad1cc");const Q={class:"app-container"},W={class:"container"},X={key:0,class:"title-container"},Z={class:"subtitle"},ee={class:"container"};i();const ae={expose:[],setup(e){const a=E(),t=v({points:[],duration:40,currency:"$"});let s=[[0,10],[10,30],[20,20],[30,50],[40,20]];s=new Array(365),s.fill([0,0]);let n=c(null);async function l(e){const a=await fetch(`data/${e}.json`).then((e=>e.json())),n=a.reduce(((e,a)=>{var t;return e[(t=new Date(a["<DATE>"]),(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())-Date.UTC(t.getFullYear(),0,0))/24/60/60/1e3)-1]=a["<CLOSE>"],e}),{});let l=a[0]["<CLOSE>"];t.points.push(...s.map(((e,a,t)=>{const s=null!=n[a]?n[a]:l;return l=s,[a,s]})))}async function i(){try{const e=await async function(){try{return await fetch("data/settings.json").then((e=>e.json()))}catch(e){}}();if(t.duration=null!=e.time?e.time:40,!Array.isArray(e.sources))return Promise.reject();if(n.value=e.sources.find((e=>e.file===a.params.id)),!n.value)return Promise.reject();t.currency=n.value.currency,await l(n.value.file)}catch(e){}}return S((()=>{i()})),C((()=>a.params.id),(e=>{t.points=[],h((()=>{i()}))})),(e,s)=>{const l=d("router-link");return u(),r(k,{name:"fade",appear:""},{default:K((()=>[f("div",Q,[f("header",{class:"header",style:{background:w(n)?w(n).color:void 0}},[f("div",W,[f(l,{class:"back-btn",to:"/"}),w(n)?(u(),r("div",X,[f("div",null,$(w(n).title),1),f("div",Z,$(w(n).short)+" "+$(w(n).year),1)])):j("",!0)])],4),f("div",ee,[w(t).points&&w(t).points.length?(u(),r(J,{points:w(t).points,duration:w(t).duration,id:w(a).params.id,key:w(a).params.id,currency:w(t).currency},null,8,["points","duration","id","currency"])):j("",!0)])])])),_:1})}},__scopeId:"data-v-3afad1cc"};const te=F();l("data-v-66d8e0a8");const se={class:"container"},ne=f("h1",{class:"h1"},"Выберите компанию",-1),le={key:0,class:"items"};i();const ie={expose:[],setup(e){const a=v({items:[],isFullscreen:O.isFullscreen});function t(){O.isEnabled&&(a.isFullscreen=!O.isFullscreen,O.toggle())}return S((async()=>{const e=await async function(){try{return await fetch("data/settings.json").then((e=>e.json()))}catch(e){}}();a.items=e.sources})),(e,s)=>{const n=d("router-link");return u(),r(k,{name:"fade",appear:""},{default:te((()=>[f("div",se,[f("button",{class:["fullscreen-icon",{off:w(a).isFullscreen}],onClick:t},null,2),ne,w(a).items?(u(),r("div",le,[(u(!0),r(b,null,V(w(a).items,(e=>(u(),r("div",{class:"item",style:{background:e.color},key:e.file},[f(n,{to:`/${e.file}`},{default:te((()=>[M($(e.title)+" "+$(e.year),1)])),_:2},1032,["to"])],4)))),128))])):j("",!0)])])),_:1})}},__scopeId:"data-v-66d8e0a8"},ue=A({routes:[{path:"",component:ie},{path:"/:id",component:ae}],history:L()}),re=B(D);re.use(ue),re.mount("#app");
