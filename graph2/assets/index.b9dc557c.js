var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s;import{p as n,a as i,o as u,c as r,r as c,b as o,d,e as v,f as h,n as p,g as y,h as m,w as x,v as g,u as f,F as w,i as b,t as V,j as $,k,l as j,m as M,q as F,s as O,x as C,y as E,z as S,A as _,B as A}from"./vendor.dfe07852.js";n("data-v-d415dcd8"),i();const L={expose:[],setup:e=>(e,a)=>{const t=c("router-view");return u(),r(t)}};n("data-v-6a25220a");const B={class:"graph-wrapper"},D={class:"container"},P={class:"value-input"},I=m("span",{class:"input-label"}," Введите вашу сумму ",-1),z=j('<div class="axis-x" data-v-6a25220a><div class="x-item" data-v-6a25220a>Янв</div><div class="x-item" data-v-6a25220a>Фев</div><div class="x-item" data-v-6a25220a>Март</div><div class="x-item" data-v-6a25220a>Апр</div><div class="x-item" data-v-6a25220a>Май</div><div class="x-item" data-v-6a25220a>Июн</div><div class="x-item" data-v-6a25220a>Июл</div><div class="x-item" data-v-6a25220a>Авг</div><div class="x-item" data-v-6a25220a>Сен</div><div class="x-item" data-v-6a25220a>Окт</div><div class="x-item" data-v-6a25220a>Ноя</div><div class="x-item" data-v-6a25220a>Дек</div></div>',1),T={class:"footer"},U={key:0,class:"container"},R=m("h3",null,"Итоговая сумма:",-1),Y={class:"current-price"};i();const q={expose:[],props:{points:Array,duration:Number,id:String,currency:String},setup(e){const n=e,{points:i,duration:c}=n;o(400),o(400),o(0),o(0);const j=o(null),M=d((()=>+j.value*(i[i.length-1][1]/i[0][1]))),F=d((()=>(+M.value.toFixed(2)).toLocaleString())),O=d((()=>j.value&&M.value?{value:M.value-+j.value,perc:100*(+M.value-+j.value)/+M.value}:{value:0,perc:0})),C=o(0),E=v({width:1e3,height:400,x:-30,y:0});d((()=>c/i.length));let S=v({isMount:!1,saved:null,selled:null,values:d((()=>[...i].map((e=>e[1])))),maxValue:d((()=>[...i].reduce(((e,a)=>null===e||+a[1]>e?+a[1]:e),null))),minValue:d((()=>[...i].reduce(((e,a)=>null===e||e>a[1]?a[1]:e),null))),steps:d((()=>[...i].length))}),_=d((()=>[{x:0,value:S.minValue,y:S.minValue&&S.maxValue?Q(0,S.minValue).y:0},{x:0,value:S.maxValue,y:S.minValue&&S.maxValue?Q(0,S.maxValue).y:0},{x:0,value:S.minValue&&S.maxValue?S.minValue+(S.maxValue-S.minValue)/2:0,y:S.minValue&&S.maxValue?Q(0,S.minValue+(S.maxValue-S.minValue)/2).y:0}]));const A=d((()=>i.reduce(((e,a)=>(e.push(Q(a[0],a[1])),e)),[]))),L=d((()=>A.value.reduce(((e,a,t,s)=>{if(t){const l=s[t-1],n=a;e.push(`M${l.x} ${l.y}, ${n.x} ${n.y}`)}return e}),[]))),q=d((()=>A.value.reduce(((e,a,t,s)=>{if(t&&t<=C.value){const l=s[t-1],n=a;e+=`${l.x} ${l.y}, ${n.x} ${n.y} `}return e}),"")));d((()=>[...L.value].filter(((e,a)=>a<C.value)))),d((()=>[...i].filter(((e,a)=>e===S.saved||e===S.selled)).map((e=>((e,n)=>{for(var i in n||(n={}))t.call(n,i)&&l(e,i,n[i]);if(a)for(var i of a(n))s.call(n,i)&&l(e,i,n[i]);return e})({value:e[1]},Q(e[0],e[1])))))),d((()=>i[C.value]));const N=o(!1);function G(e){e+1<S.steps?C.value=e+1:(N.value=!1,null==S.selled&&(S.selled=i[S.steps-1]))}const H=o(null);function J(){N.value=!0,K()}function K(){G(C.value),N.value&&p((()=>{K()}))}function Q(e,a){const t=(E.width-35-0)/S.steps,s=(E.height-80-20)/(S.maxValue-S.minValue);return{x:0+e*t,y:E.height-40-a*s+S.minValue*s}}function W(){const{width:e,height:a}=H.value.getBoundingClientRect();E.width=Math.round(e),E.height=Math.round(a)}return h((()=>{const{width:e,height:a}=H.value.getBoundingClientRect();C.value=0,E.width=Math.round(e),E.height=Math.round(a),window.addEventListener("resize",W),p((()=>{J()}))})),y((()=>{window.removeEventListener("resize",W)})),(e,a)=>(u(),r(w,null,[m("div",B,[m("div",D,[m("label",P,[I,x(m("input",{class:"input-text",type:"text","onUpdate:modelValue":a[1]||(a[1]=e=>j.value=e)},null,512),[[g,j.value]])])]),m("div",{ref:H,class:"graph-container"},[z,(u(),r("svg",{class:"graph",width:f(E).width+10,height:f(E).height,viewBox:`${f(E).x} ${f(E).y} ${f(E).width+10} ${f(E).height}`,fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("path",{class:"axis",d:`M0 ${f(E).height}, ${f(E).width} ${f(E).height}`},null,8,["d"]),(u(!0),r(w,null,b(f(_),(e=>(u(),r(w,{key:e.value},[m("path",{class:"y-line",d:`M0 ${e.y}, ${f(E).width} ${e.y}`},null,8,["d"]),m("text",{x:"-25",y:e.y+4,class:"y-text"},V(Math.round(e.value)),9,["y"])],64)))),128)),m("path",{class:"axis",d:`M0 ${f(E).height}, 0 0`},null,8,["d"]),m("polyline",{class:"line-path","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",points:f(q)},null,8,["points"])],8,["width","height","viewBox"]))],512)]),m("div",T,[j.value?(u(),r("div",U,[R,m("div",Y,V(f(F))+" "+V(n.currency?" "+n.currency:" ₽"),1),f(O)&&f(O).value?(u(),r("div",{key:0,class:["current-diff",{up:f(O).value>0,down:f(O).value<0}]},[0!==f(O).value?(u(),r("div",{key:0,class:["arrow",{up:f(O).value>0,down:f(O).value<0}]},null,2)):$("",!0),k(" "+V((+Math.abs(f(O).value).toFixed(2)).toLocaleString())+" "+V(n.currency?" "+n.currency:" ₽")+" ("+V(+Math.abs(f(O).perc).toFixed(2))+"%) ",1)],2)):$("",!0)])):$("",!0)])],64))},__scopeId:"data-v-6a25220a"};n("data-v-b6147dc0");const N={class:"app-container"},G={class:"container"},H={key:0,class:"title-container"},J={class:"subtitle"},K={class:"container"};i();const Q={expose:[],setup(e){const a=O(),t=v({points:[],duration:40,currency:"$"});let s=[[0,10],[10,30],[20,20],[30,50],[40,20]];s=new Array(365),s.fill([0,0]);let l=o(null);async function n(e){const a=await fetch(`data/${e}.json`).then((e=>e.json())),l=a.reduce(((e,a)=>{var t;return e[(t=new Date(a["<DATE>"]),(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())-Date.UTC(t.getFullYear(),0,0))/24/60/60/1e3)-1]=a["<CLOSE>"],e}),{});let n=a[0]["<CLOSE>"];t.points.push(...s.map(((e,a,t)=>{const s=null!=l[a]?l[a]:n;return n=s,[a,s]})))}async function i(){try{const e=await async function(){try{return await fetch("data/settings.json").then((e=>e.json()))}catch(e){}}();if(t.duration=null!=e.time?e.time:40,!Array.isArray(e.sources))return Promise.reject();if(l.value=e.sources.find((e=>e.file===a.params.id)),!l.value)return Promise.reject();t.currency=l.value.currency,await n(l.value.file)}catch(e){}}return M((()=>{i()})),F((()=>a.params.id),(e=>{t.points=[],p((()=>{i()}))})),(e,s)=>{const n=c("router-link");return u(),r("div",N,[m("header",{class:"header",style:{background:f(l)?f(l).color:void 0}},[m("div",G,[m(n,{class:"back-btn",to:"/"}),f(l)?(u(),r("div",H,[m("div",null,V(f(l).title),1),m("div",J,V(f(l).short)+" "+V(f(l).year),1)])):$("",!0)])],4),m("div",K,[f(t).points&&f(t).points.length?(u(),r(q,{points:f(t).points,duration:f(t).duration,id:f(a).params.id,key:f(a).params.id,currency:f(t).currency},null,8,["points","duration","id","currency"])):$("",!0)])])}},__scopeId:"data-v-b6147dc0"};const W=E();n("data-v-e3a7462e");const X={class:"container"},Z=m("h1",{class:"h1"},"Выберите компанию",-1),ee={key:0,class:"items"};i();const ae={expose:[],setup(e){const a=v({items:[],isFullscreen:!1});function t(){C.isEnabled&&(a.isFullscreen=!C.isFullscreen,C.toggle())}return M((async()=>{const e=await async function(){try{return await fetch("data/settings.json").then((e=>e.json()))}catch(e){}}();a.items=e.sources})),(e,s)=>{const l=c("router-link");return u(),r("div",X,[m("button",{class:["fullscreen-icon",{off:f(a).isFullscreen}],onClick:t},null,2),Z,f(a).items?(u(),r("div",ee,[(u(!0),r(w,null,b(f(a).items,(e=>(u(),r("div",{class:"item",style:{background:e.color},key:e.file},[m(l,{to:`/${e.file}`},{default:W((()=>[k(V(e.title)+" "+V(e.year),1)])),_:2},1032,["to"])],4)))),128))])):$("",!0)])}},__scopeId:"data-v-e3a7462e"},te=S({routes:[{path:"",component:ae},{path:"/:id",component:Q}],history:_()}),se=A(L);se.use(te),se.mount("#app");
