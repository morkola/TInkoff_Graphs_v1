var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s;import{p as n,a as i,o as c,c as u,r,b as o,d,e as v,f as p,n as y,g as h,h as m,u as x,t as f,i as g,F as w,j as b,T as k,k as V,w as $,v as j,l as M,m as _,q as F,s as C,x as O,y as A,z as E,A as D,B as S}from"./vendor.151b6140.js";n("data-v-5389a9ea"),i();const B={expose:[],setup:e=>(e,a)=>{const t=r("router-view");return c(),u(t)}};const L=M();n("data-v-ec01a15c");const P={class:"graph-wrapper"},T={class:"price"},I={key:0,class:"current-price"},z=_('<div class="axis-x" data-v-ec01a15c><div class="x-item" data-v-ec01a15c>Янв</div><div class="x-item" data-v-ec01a15c>Фев</div><div class="x-item" data-v-ec01a15c>Март</div><div class="x-item" data-v-ec01a15c>Апр</div><div class="x-item" data-v-ec01a15c>Май</div><div class="x-item" data-v-ec01a15c>Июн</div><div class="x-item" data-v-ec01a15c>Июл</div><div class="x-item" data-v-ec01a15c>Авг</div><div class="x-item" data-v-ec01a15c>Сен</div><div class="x-item" data-v-ec01a15c>Окт</div><div class="x-item" data-v-ec01a15c>Ноя</div><div class="x-item" data-v-ec01a15c>Дек</div></div>',1),R={class:"footer"},U={class:"container"},Y={key:0,class:"price"},q={key:0,style:{position:"relative"}};i();const N={expose:[],props:{points:Array,duration:Number,id:String,currency:String},setup(e){const n=e,{points:i,duration:r}=n;o(400),o(400),o(0),o(0);const M=o(0),_=d({width:1e3,height:400,x:-30,y:0}),F=v((()=>r/i.length));let C=d({isMount:!1,saved:null,selled:null,values:v((()=>[...i].map((e=>e[1])))),maxValue:v((()=>[...i].reduce(((e,a)=>null===e||+a[1]>e?+a[1]:e),null))),minValue:v((()=>[...i].reduce(((e,a)=>null===e||e>a[1]?a[1]:e),null))),steps:v((()=>[...i].length))}),O=v((()=>[{x:0,value:C.minValue,y:C.minValue&&C.maxValue?Z(0,C.minValue).y:0},{x:0,value:C.maxValue,y:C.minValue&&C.maxValue?Z(0,C.maxValue).y:0},{x:0,value:C.minValue&&C.maxValue?C.minValue+(C.maxValue-C.minValue)/2:0,y:C.minValue&&C.maxValue?Z(0,C.minValue+(C.maxValue-C.minValue)/2).y:0}]));const A=v((()=>i.reduce(((e,a)=>(e.push(Z(a[0],a[1])),e)),[]))),E=v((()=>A.value.reduce(((e,a,t,s)=>{if(t){const l=s[t-1],n=a;e.push(`M${l.x} ${l.y}, ${n.x} ${n.y}`)}return e}),[]))),D=v((()=>A.value.reduce(((e,a,t,s)=>{if(t&&t<=M.value){const l=s[t-1],n=a;e+=`${l.x} ${l.y}, ${n.x} ${n.y} `}return e}),"")));v((()=>[...E.value].filter(((e,a)=>a<M.value))));const S=v((()=>[...i].filter(((e,a)=>e===C.saved||e===C.selled)).map((e=>((e,n)=>{for(var i in n||(n={}))t.call(n,i)&&l(e,i,n[i]);if(a)for(var i of a(n))s.call(n,i)&&l(e,i,n[i]);return e})({value:e[1]},Z(e[0],e[1])))))),B=v((()=>i[M.value]));v((()=>+(M.value>0?i[M.value][1]-i[M.value-1][1]:0).toFixed(2)));const N=o(!1),G=v((()=>C.saved&&C.selled?{value:C.selled[1]-C.saved[1],perc:100*(C.selled[1]-C.saved[1])/C.saved[1]}:null));function H(e){e+1<C.steps?M.value=e+1:(N.value=!1,null==C.selled&&(C.selled=i[C.steps-1]))}const J=o(null);function K(){N.value=!0,Q()}function Q(){H(M.value),N.value&&setTimeout((()=>{Q()}),1e3*F.value)}function W(){C.saved=i[M.value]}function X(){C.selled=i[M.value]}function Z(e,a){const t=(_.width-35-0)/C.steps,s=(_.height-80-20)/(C.maxValue-C.minValue);return{x:0+e*t,y:_.height-40-a*s+C.minValue*s}}function ee(){const{width:e,height:a}=J.value.getBoundingClientRect();_.width=Math.round(e),_.height=Math.round(a)}return p((()=>{const{width:e,height:a}=J.value.getBoundingClientRect();M.value=0,_.width=Math.round(e),_.height=Math.round(a),window.addEventListener("resize",ee),y((()=>{K()}))})),h((()=>{window.removeEventListener("resize",ee)})),(e,a)=>(c(),u(w,null,[m("div",P,[m("div",T,[x(B)||x(C).selled?(c(),u("div",I,f(x(C).selled?+x(C).selled[1].toFixed(2)+(n.currency?" "+n.currency:" ₽"):x(B)[1].toLocaleString()+(n.currency?" "+n.currency:" ₽")),1)):g("",!0)]),m("div",{ref:J,class:"graph-container"},[z,(c(),u("svg",{class:"graph",width:x(_).width+10,height:x(_).height,viewBox:`${x(_).x} ${x(_).y} ${x(_).width+10} ${x(_).height}`,fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("path",{class:"axis",d:`M0 ${x(_).height}, ${x(_).width} ${x(_).height}`},null,8,["d"]),(c(!0),u(w,null,b(x(O),(e=>(c(),u(w,{key:e.value},[m("path",{class:"y-line",d:`M0 ${e.y}, ${x(_).width} ${e.y}`},null,8,["d"]),m("text",{x:"-25",y:e.y+4,class:"y-text"},f(Math.round(e.value)),9,["y"])],64)))),128)),m("path",{class:"axis",d:`M0 ${x(_).height}, 0 0`},null,8,["d"]),(c(!0),u(w,null,b(x(S),((e,a)=>(c(),u(w,{key:a},[m("circle",{cx:e.x,cy:e.y,r:"5",fill:"red",class:"point-circle"},null,8,["cx","cy"]),m("line",{x1:e.x,y1:e.y-30,x2:e.x,y2:x(_).height,stroke:"black"},null,8,["x1","y1","x2","y2"]),m("line",{x1:e.x-5,y1:e.y-30,x2:e.x+5,y2:e.y-30,stroke:"black"},null,8,["x1","y1","x2","y2"]),m("text",{"text-anchor":"end",x:e.x+8,y:e.y-40,class:"point-text"},f(e.value),9,["x","y"])],64)))),128)),m("polyline",{class:"line-path","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",points:x(D)},null,8,["points"])],8,["width","height","viewBox"]))],512)]),m("div",R,[m("div",U,[x(G)?(c(),u("div",Y,[m(k,{name:"fade",appear:""},{default:L((()=>[x(G)?(c(),u("div",{key:0,class:["current-diff",{up:x(G).value>0,down:x(G).value<0}]},[0!==x(G).value?(c(),u("div",{key:0,class:["arrow",{up:x(G).value>0,down:x(G).value<0}]},null,2)):g("",!0),V(" "+f(+Math.abs(x(G).value).toFixed(2))+" "+f(n.currency?" "+n.currency:" ₽")+" ("+f(+Math.abs(x(G).perc).toFixed(2))+"%) ",1)],2)):g("",!0)])),_:1})])):g("",!0),m(k,{name:"fade",mode:"in-out",appear:""},{default:L((()=>[N.value?(c(),u("div",q,[m(k,{name:"fade",mode:"in-out",appear:""},{default:L((()=>[$(m("button",{class:"button",onClick:W}," Купить ",512),[[j,N.value&&!x(C).saved]])])),_:1}),m(k,{name:"fade",mode:"in-out",appear:""},{default:L((()=>[$(m("button",{class:"button",style:{background:"#151D2A"},onClick:X}," Продать ",512),[[j,N.value&&x(C).saved&&!x(G)]])])),_:1})])):g("",!0)])),_:1})])])],64))},__scopeId:"data-v-ec01a15c"};const G=M();n("data-v-5332fa66");const H={class:"app-container"},J={class:"container"},K={key:0,class:"title-container"},Q={class:"subtitle"},W={class:"container"};i();const X={expose:[],setup(e){const a=O(),t=d({points:[],duration:40,currency:"$"});let s=[[0,10],[10,30],[20,20],[30,50],[40,20]];s=new Array(365),s.fill([0,0]);let l=o(null);async function n(e){const a=await fetch(`data/${e}.json`).then((e=>e.json())),l=a.reduce(((e,a)=>{var t;return e[(t=new Date(a["<DATE>"]),(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())-Date.UTC(t.getFullYear(),0,0))/24/60/60/1e3)-1]=a["<CLOSE>"],e}),{});let n=a[0]["<CLOSE>"];t.points.push(...s.map(((e,a,t)=>{const s=null!=l[a]?l[a]:n;return n=s,[a,s]})))}async function i(){try{const e=await async function(){try{return await fetch("data/settings.json").then((e=>e.json()))}catch(e){}}();if(t.duration=e.time||40,!Array.isArray(e.sources))return Promise.reject();if(l.value=e.sources.find((e=>e.file===a.params.id)),!l.value)return Promise.reject();t.currency=l.value.currency,await n(l.value.file)}catch(e){}}return F((()=>{i()})),C((()=>a.params.id),(e=>{t.points=[],y((()=>{i()}))})),(e,s)=>{const n=r("router-link");return c(),u(k,{name:"fade",appear:""},{default:G((()=>[m("div",H,[m("header",{class:"header",style:{background:x(l)?x(l).color:void 0}},[m("div",J,[m(n,{class:"back-btn",to:"/"}),x(l)?(c(),u("div",K,[m("div",null,f(x(l).title),1),m("div",Q,f(x(l).short)+" "+f(x(l).year),1)])):g("",!0)])],4),m("div",W,[x(t).points&&x(t).points.length?(c(),u(N,{points:x(t).points,duration:x(t).duration,id:x(a).params.id,key:x(a).params.id,currency:x(t).currency},null,8,["points","duration","id","currency"])):g("",!0)])])])),_:1})}},__scopeId:"data-v-5332fa66"};const Z=M();n("data-v-2f359938");const ee={class:"container"},ae=m("h1",{class:"h1"},"Выберите компанию",-1),te={key:0,class:"items"};i();const se={expose:[],setup(e){const a=d({items:[],isFullscreen:A.isFullscreen});function t(){A.isEnabled&&(a.isFullscreen=!A.isFullscreen,A.toggle())}return F((async()=>{const e=await async function(){try{return await fetch("data/settings.json").then((e=>e.json()))}catch(e){}}();a.items=e.sources})),(e,s)=>{const l=r("router-link");return c(),u(k,{name:"fade",appear:""},{default:Z((()=>[m("div",ee,[m("button",{class:["fullscreen-icon",{off:x(a).isFullscreen}],onClick:t},null,2),ae,x(a).items?(c(),u("div",te,[(c(!0),u(w,null,b(x(a).items,(e=>(c(),u("div",{class:"item",style:{background:e.color},key:e.file},[m(l,{to:`/${e.file}`},{default:Z((()=>[V(f(e.title)+" "+f(e.year),1)])),_:2},1032,["to"])],4)))),128))])):g("",!0)])])),_:1})}},__scopeId:"data-v-2f359938"},le=E({routes:[{path:"",component:se},{path:"/:id",component:X}],history:D()}),ne=S(B);ne.use(le),ne.mount("#app");
